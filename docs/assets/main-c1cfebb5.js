(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var o={};Object.defineProperty(o,"__esModule",{value:!0});o.permutations=o.polarToRectangular=g=o.makeBoundedLinear=o.makeLinear=o.sum=o.countMap=h=o.initializedArray=o.count=y=o.zip=o.FIGURE_SPACE=o.NON_BREAKING_SPACE=o.dateIsValid=o.MIN_DATE=o.MAX_DATE=o.makePromise=o.filterMap=o.pick=o.pickAny=o.csvStringToArray=o.parseTimeT=o.parseIntX=o.parseFloatX=o.getAttribute=o.followPath=o.parseXml=o.testXml=o.sleep=A=o.assertClass=void 0;function _(t,e,n="Assertion Failed."){const r=i=>{throw new Error(`${n}  Expected type:  ${e.name}.  Found type:  ${i}.`)};if(t===null)r("null");else if(typeof t!="object")r(typeof t);else if(!(t instanceof e))r(t.constructor.name);else return t;throw new Error("wtf")}var A=o.assertClass=_;function B(t){return new Promise(e=>setTimeout(e,t))}o.sleep=B;function I(t){const n=new DOMParser().parseFromString(t,"application/xml");for(const r of Array.from(n.querySelectorAll("parsererror")))if(r instanceof HTMLElement)return{error:r};return{parsed:n}}o.testXml=I;function X(t){if(t!==void 0)return I(t)?.parsed?.documentElement}o.parseXml=X;function C(t,...e){for(const n of e){if(t===void 0)return;if(typeof n=="number")t=t.children[n];else{const r=t.getElementsByTagName(n);if(r.length!=1)return;t=r[0]}}return t}o.followPath=C;function D(t,e,...n){if(e=C(e,...n),e!==void 0&&e.hasAttribute(t))return e.getAttribute(t)??void 0}o.getAttribute=D;function G(t){if(t==null)return;const e=parseFloat(t);if(isFinite(e))return e}o.parseFloatX=G;function L(t){const e=G(t);if(e!==void 0)return e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||e!=Math.floor(e)?void 0:e}o.parseIntX=L;function R(t){if(typeof t=="string"&&(t=L(t)),t!=null&&!(t<=0))return new Date(t*1e3)}o.parseTimeT=R;const O=t=>{const e=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,n=[[]];let r;for(;r=e.exec(t);)r[1].length&&r[1]!==","&&n.push([]),n[n.length-1].push(r[2]!==void 0?r[2].replace(/""/g,'"'):r[3]);return n};o.csvStringToArray=O;function $(t){const e=t.values().next();if(!e.done)return e.value}o.pickAny=$;function H(t){return t[Math.random()*t.length|0]}o.pick=H;function Z(t,e){const n=[];return t.forEach((r,i)=>{const s=e(r,i);s!==void 0&&n.push(s)}),n}o.filterMap=Z;function U(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}o.makePromise=U;o.MAX_DATE=new Date(864e13);o.MIN_DATE=new Date(-864e13);function j(t){return isFinite(t.getTime())}o.dateIsValid=j;o.NON_BREAKING_SPACE=" ";o.FIGURE_SPACE=" ";function*q(...t){const e=t.map(n=>n[Symbol.iterator]());for(;;){const n=e.map(r=>r.next());if(n.some(({done:r})=>r))break;yield n.map(({value:r})=>r)}}var y=o.zip=q;function*Y(t=0,e=1/0,n=1){for(let r=t;r<e;r+=n)yield r}o.count=Y;function V(t,e){const n=[];for(let r=0;r<t;r++)n.push(e(r));return n}var h=o.initializedArray=V;o.countMap=V;function K(t){return t.reduce((e,n)=>e+n,0)}o.sum=K;function W(t,e,n,r){const i=(r-e)/(n-t);return function(s){return(s-t)*i+e}}o.makeLinear=W;function J(t,e,n,r){n<t&&([t,e,n,r]=[n,r,t,e]);const i=(r-e)/(n-t);return function(s){return s<=t?e:s>=n?r:(s-t)*i+e}}var g=o.makeBoundedLinear=J;function Q(t,e){return{x:Math.sin(e)*t,y:Math.cos(e)*t}}o.polarToRectangular=Q;function*x(t,e=[]){if(t.length==0)yield e;else for(let n=0;n<t.length;n++){const r=t[n],i=[...e,r],s=[...t.slice(0,n),...t.slice(n+1)];yield*x(s,i)}}o.permutations=x;var u={};Object.defineProperty(u,"__esModule",{value:!0});u.download=u.createElementFromHTML=u.getHashInfo=u.getAudioBalanceControl=u.getBlobFromCanvas=u.loadDateTimeLocal=d=u.getById=void 0;const N=o;function ee(t,e){const n=document.getElementById(t);if(!n)throw new Error("Could not find element with id "+t+".  Expected type:  "+e.name);if(n instanceof e)return n;throw new Error("Element with id "+t+" has type "+n.constructor.name+".  Expected type:  "+e.name)}var d=u.getById=ee;function te(t,e,n="milliseconds"){let r;switch(n){case"minutes":{r=e.getSeconds()*1e3+e.getMilliseconds();break}case"seconds":{r=e.getMilliseconds();break}case"milliseconds":{r=0;break}default:throw new Error("wtf")}t.valueAsNumber=+e-e.getTimezoneOffset()*6e4-r}u.loadDateTimeLocal=te;function ne(t){const{reject:e,resolve:n,promise:r}=(0,N.makePromise)();return t.toBlob(i=>{i?n(i):e(new Error("blob is null!"))}),r}u.getBlobFromCanvas=ne;function re(t){const e=new AudioContext,n=e.createMediaElementSource(t),r=new StereoPannerNode(e,{pan:0});return n.connect(r).connect(e.destination),i=>{r.pan.value=i}}u.getAudioBalanceControl=re;function oe(){const t=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(r=>{const i=r.split("=",2);if(i.length==2){const s=decodeURIComponent(i[0]),c=decodeURIComponent(i[1]);t.set(s,c)}}),t}u.getHashInfo=oe;function ie(t,e){var n=document.createElement("div");return n.innerHTML=t.trim(),(0,N.assertClass)(n.firstChild,e,"createElementFromHTML:")}u.createElementFromHTML=ie;function se(t,e){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}u.download=se;const ae=d("zoomIn",SVGSVGElement),f=d("mouseListener",SVGRectElement),b=d("mousePointer",SVGGeometryElement),S=d("currentlyCenteredPointer",SVGGeometryElement),ce=d("currentlyCenteredTranslate",SVGGElement),le=d("currentlyCenteredZoom",SVGGElement),T=d("zoomedInParabola",SVGPathElement);function ue(){b.style.display=""}function F(){b.style.display="none"}["mouseenter","mousemove","mousedown"].forEach(t=>f.addEventListener(t,()=>{ue()}));f.addEventListener("mouseleave",()=>{F()});function k({screenX:t,screenY:e}){const n=ae.createSVGPoint();n.x=t,n.y=e;const r=n.matrixTransform(f.getScreenCTM().inverse()),i=2-r.x*r.x;return{x:r.x,y:i}}function z(t,{x:e,y:n}){const r=-2*e,i=Math.atan(r)/Math.PI*180;t.setAttribute("transform",`translate(${e}, ${n}) rotate(${i})`)}["mousemove","mouseenter"].forEach(t=>f.addEventListener(t,e=>{z(b,k(e))}));class m{static centerX=0;static centerY=0;static ratio=1;static#e;static animationIsRunning(){return this.#e!==void 0}static#t=!1;static#n=d("zoomText",SVGGElement);static#r=A(this.#n.firstElementChild,SVGTextElement);static startAnimation(){this.animationIsRunning()||this.restartAnimation()}static restartAnimation(e=0){const n=performance.now()+e,r=g(n,0,n+1e4,Math.log(300)),i=g(n+1e3,0,n+1e4,.75),s=n+15e3;this.#e=c=>{if(c>s){const a=(Math.random()+Math.random())/2*5-2.5,l=2-a*a;this.selectNewTarget({x:a,y:l}),this.restartAnimation(500)}else{const a=Math.exp(r(c));this.setNewZoom(a);const l=i(c);S.style.opacity=l.toString()}},F(),this.setNewZoom(1),this.#t||(this.#t=!0,requestAnimationFrame(this.onAnimationFrame))}static stopAnimation(){this.#e=void 0,this.setNewZoom(1)}static onAnimationFrame(e){requestAnimationFrame(m.onAnimationFrame),m.#e?.(e)}static updateGUI(){T.setAttribute("transform",`scale(${this.ratio}) translate(${-this.centerX}, ${-this.centerY})`),ce.setAttribute("transform",`translate(${this.centerX}, ${this.centerY})`),le.setAttribute("transform",`scale(${1/this.ratio})`),z(S,{x:this.centerX,y:this.centerY});const e=(.15/this.ratio).toString();T.setAttribute("stroke-width",e),this.#r.textContent=`${this.ratio<10?Math.round(this.ratio*10)/10:Math.round(this.ratio)}⨉`}static selectNewTarget({x:e,y:n}){this.centerX=e,this.centerY=n,this.ratio=1,this.updateGUI()}static setNewZoom(e){this.ratio=e,this.updateGUI()}}function de(t){f.style.cursor=t.buttons?"zoom-in":"ew-resize"}["mouseup","mousedown","mouseenter"].forEach(t=>{f.addEventListener(t,de)});["mouseenter","mousemove","mousedown"].forEach(t=>{f.addEventListener(t,e=>{e.buttons&&m.selectNewTarget(k(e))})});f.addEventListener("mouseleave",()=>{m.startAnimation()});["mouseenter","mouseup","mousedown"].forEach(t=>{f.addEventListener(t,e=>{e.buttons==0?m.startAnimation():m.stopAnimation()})});m.selectNewTarget({x:0,y:2});m.startAnimation();class E{constructor(e,n){this.parent=e,this.type=n;let r;for(const i of e.children)if(i instanceof n){r=i;break}if(!r)throw new Error("wtf");r.remove(),this.#e=r}#e;create(){return A(this.#e.cloneNode(!0),this.type)}createParented(){return this.parent.appendChild(this.create())}}class w{constructor(e,n,r,i=6/e){this.numberOfSegments=e;const s=n===void 0?void 0:d(n,SVGGElement),c=d(r,SVGGElement);if(s){{const a=new E(s,SVGCircleElement);this.#e=h(e+1,()=>a.createParented())}{const a=new E(s,SVGLineElement);this.#t=h(e,()=>a.createParented())}}else this.#e=[],this.#t=[];{const a=new E(c,SVGCircleElement),l=new E(c,SVGLineElement);this.#n=h(e,()=>{const p=l.createParented(),v=a.createParented(),P=a.createParented();return{start:v,middle:p,end:P}})}this.resize(i)}#e;#t;#n;resize(e){const n=this.numberOfSegments+1,r=this.numberOfSegments/2,i=h(n,c=>{const a=(c-r)*e,l=a*a/2;return{x:a,y:l}});for(const[c,a]of y(i,this.#e))a.cx.baseVal.value=c.x,a.cy.baseVal.value=c.y;const s=h(i.length-1,c=>({first:i[c],second:i[c+1]}));for(const[{first:c,second:a},l]of y(s,this.#t))l.x1.baseVal.value=c.x,l.y1.baseVal.value=c.y,l.x2.baseVal.value=a.x,l.y2.baseVal.value=a.y;for(const[{first:c,second:a},{start:l,middle:p,end:v}]of y(s,this.#n)){const M=(a.y-c.y)/(a.x-c.x)/2;l.cx.baseVal.value=p.x1.baseVal.value=c.x,l.cy.baseVal.value=p.y1.baseVal.value=M,v.cx.baseVal.value=p.x2.baseVal.value=a.x,v.cy.baseVal.value=p.y2.baseVal.value=M}}}new w(6,"sampleParabola","sampleDerivative",1);new w(12,"animatedParabola1","animatedDerivative1",.5);new w(24,"animatedParabola2","animatedDerivative2");{let t=function(a){const l=a%r;c.resize(s(l))},e=function(){requestAnimationFrame(n)},n=function(a){e(),t(a)};const s=g(0,1,5e3,.125),c=new w(48,void 0,"animatedDerivative3");e()}
