(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var s={};Object.defineProperty(s,"__esModule",{value:!0});s.permutations=s.polarToRectangular=z=s.makeBoundedLinear=S=s.makeLinear=s.sum=s.countMap=G=s.initializedArray=s.count=H=s.zip=s.FIGURE_SPACE=s.NON_BREAKING_SPACE=s.dateIsValid=s.MIN_DATE=s.MAX_DATE=s.makePromise=s.filterMap=s.pick=s.pickAny=s.csvStringToArray=s.parseTimeT=s.parseIntX=s.parseFloatX=s.getAttribute=s.followPath=s.parseXml=s.testXml=s.sleep=R=s.assertClass=void 0;function de(t,e,n="Assertion Failed."){const r=i=>{throw new Error(`${n}  Expected type:  ${e.name}.  Found type:  ${i}.`)};if(t===null)r("null");else if(typeof t!="object")r(typeof t);else if(!(t instanceof e))r(t.constructor.name);else return t;throw new Error("wtf")}var R=s.assertClass=de;function he(t){return new Promise(e=>setTimeout(e,t))}s.sleep=he;function Q(t){const n=new DOMParser().parseFromString(t,"application/xml");for(const r of Array.from(n.querySelectorAll("parsererror")))if(r instanceof HTMLElement)return{error:r};return{parsed:n}}s.testXml=Q;function fe(t){if(t!==void 0)return Q(t)?.parsed?.documentElement}s.parseXml=fe;function J(t,...e){for(const n of e){if(t===void 0)return;if(typeof n=="number")t=t.children[n];else{const r=t.getElementsByTagName(n);if(r.length!=1)return;t=r[0]}}return t}s.followPath=J;function pe(t,e,...n){if(e=J(e,...n),e!==void 0&&e.hasAttribute(t))return e.getAttribute(t)??void 0}s.getAttribute=pe;function ee(t){if(t==null)return;const e=parseFloat(t);if(isFinite(e))return e}s.parseFloatX=ee;function te(t){const e=ee(t);if(e!==void 0)return e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||e!=Math.floor(e)?void 0:e}s.parseIntX=te;function ge(t){if(typeof t=="string"&&(t=te(t)),t!=null&&!(t<=0))return new Date(t*1e3)}s.parseTimeT=ge;const ye=t=>{const e=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,n=[[]];let r;for(;r=e.exec(t);)r[1].length&&r[1]!==","&&n.push([]),n[n.length-1].push(r[2]!==void 0?r[2].replace(/""/g,'"'):r[3]);return n};s.csvStringToArray=ye;function Ee(t){const e=t.values().next();if(!e.done)return e.value}s.pickAny=Ee;function ve(t){return t[Math.random()*t.length|0]}s.pick=ve;function we(t,e){const n=[];return t.forEach((r,i)=>{const o=e(r,i);o!==void 0&&n.push(o)}),n}s.filterMap=we;function Pe(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}s.makePromise=Pe;s.MAX_DATE=new Date(864e13);s.MIN_DATE=new Date(-864e13);function Ae(t){return isFinite(t.getTime())}s.dateIsValid=Ae;s.NON_BREAKING_SPACE=" ";s.FIGURE_SPACE=" ";function*Me(...t){const e=t.map(n=>n[Symbol.iterator]());for(;;){const n=e.map(r=>r.next());if(n.some(({done:r})=>r))break;yield n.map(({value:r})=>r)}}var H=s.zip=Me;function*be(t=0,e=1/0,n=1){for(let r=t;r<e;r+=n)yield r}s.count=be;function ne(t,e){const n=[];for(let r=0;r<t;r++)n.push(e(r));return n}var G=s.initializedArray=ne;s.countMap=ne;function Se(t){return t.reduce((e,n)=>e+n,0)}s.sum=Se;function Te(t,e,n,r){const i=(r-e)/(n-t);return function(o){return(o-t)*i+e}}var S=s.makeLinear=Te;function Ce(t,e,n,r){n<t&&([t,e,n,r]=[n,r,t,e]);const i=(r-e)/(n-t);return function(o){return o<=t?e:o>=n?r:(o-t)*i+e}}var z=s.makeBoundedLinear=Ce;function $e(t,e){return{x:Math.sin(e)*t,y:Math.cos(e)*t}}s.polarToRectangular=$e;function*re(t,e=[]){if(t.length==0)yield e;else for(let n=0;n<t.length;n++){const r=t[n],i=[...e,r],o=[...t.slice(0,n),...t.slice(n+1)];yield*re(o,i)}}s.permutations=re;var d={};Object.defineProperty(d,"__esModule",{value:!0});d.download=d.createElementFromHTML=d.getHashInfo=d.getAudioBalanceControl=d.getBlobFromCanvas=d.loadDateTimeLocal=l=d.getById=void 0;const ie=s;function Ge(t,e){const n=document.getElementById(t);if(!n)throw new Error("Could not find element with id "+t+".  Expected type:  "+e.name);if(n instanceof e)return n;throw new Error("Element with id "+t+" has type "+n.constructor.name+".  Expected type:  "+e.name)}var l=d.getById=Ge;function Le(t,e,n="milliseconds"){let r;switch(n){case"minutes":{r=e.getSeconds()*1e3+e.getMilliseconds();break}case"seconds":{r=e.getMilliseconds();break}case"milliseconds":{r=0;break}default:throw new Error("wtf")}t.valueAsNumber=+e-e.getTimezoneOffset()*6e4-r}d.loadDateTimeLocal=Le;function Ie(t){const{reject:e,resolve:n,promise:r}=(0,ie.makePromise)();return t.toBlob(i=>{i?n(i):e(new Error("blob is null!"))}),r}d.getBlobFromCanvas=Ie;function Ve(t){const e=new AudioContext,n=e.createMediaElementSource(t),r=new StereoPannerNode(e,{pan:0});return n.connect(r).connect(e.destination),i=>{r.pan.value=i}}d.getAudioBalanceControl=Ve;function xe(){const t=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(r=>{const i=r.split("=",2);if(i.length==2){const o=decodeURIComponent(i[0]),a=decodeURIComponent(i[1]);t.set(o,a)}}),t}d.getHashInfo=xe;function ke(t,e){var n=document.createElement("div");return n.innerHTML=t.trim(),(0,ie.assertClass)(n.firstChild,e,"createElementFromHTML:")}d.createElementFromHTML=ke;function Ne(t,e){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}d.download=Ne;function oe(t,e){const n={x:(t.x+e.x)/2,y:(t.y+e.y)/2};{const o=(e.y-t.y)/(e.x-t.x);if(t.yPrime>o&&e.yPrime>o||t.yPrime<o&&e.yPrime<o)return n}const r=(t.x*t.yPrime-t.y-e.x*e.yPrime+e.y)/(t.yPrime-e.yPrime);if(!isFinite(r))return console.log({x:r,p1:t,p2:e}),n;const i=(r-t.x)*t.yPrime+t.y;return isFinite(i)?{x:r,y:i}:(console.log({y:i,x:r,p1:t,p2:e}),n)}window.quadraticControlPoint=oe;function*Fe(t,e=2){if(e<1||(e|0)!=e)throw new Error("wtf");const n=[];for(const r of t)n.push(r),n.length==e&&(yield n,n.shift())}function De(t){let e="";for(const[n,r]of Fe(t)){e==""&&(e=`M ${n.x},${n.y}`);const i=oe(n,r);e+=` Q ${i.x},${i.y} ${r.x},${r.y}`}return e}function He({x0:t,frequencyMultiplier:e,yCenter:n,amplitude:r}){return{f(i){return Math.sin((i-t)*e)*r+n},fPrime(i){return Math.cos((i-t)*e)*r*e}}}function ze({left:t,right:e,frequencyMultiplier:n}){if(e<=t)return[];const r=10,i=(e-t)/(2*Math.PI)*n,o=Math.max(1,Math.round(i*r));return G(o+1,S(0,t,o,e))}function Re(t){const e=ze(t),n=He(t);return e.map(i=>({x:i,y:n.f(i),yPrime:n.fPrime(i)}))}function X(t){return De(Re(t))}window.sineWavePath=X;const _e=l("zoomIn",SVGSVGElement),M=l("mouseListener",SVGRectElement),O=l("mousePointer",SVGGeometryElement),j=l("currentlyCenteredPointer",SVGGeometryElement),Be=l("currentlyCenteredTranslate",SVGGElement),Xe=l("currentlyCenteredZoom",SVGGElement),K=l("zoomedInParabola",SVGPathElement);function Oe(){O.style.display=""}function se(){O.style.display="none"}["mouseenter","mousemove","mousedown"].forEach(t=>M.addEventListener(t,()=>{Oe()}));M.addEventListener("mouseleave",()=>{se()});function ae({screenX:t,screenY:e}){const n=_e.createSVGPoint();n.x=t,n.y=e;const r=n.matrixTransform(M.getScreenCTM().inverse()),i=2-r.x*r.x;return{x:r.x,y:i}}function ce(t,{x:e,y:n}){const r=-2*e,i=Math.atan(r)/Math.PI*180;t.setAttribute("transform",`translate(${e}, ${n}) rotate(${i})`)}["mousemove","mouseenter"].forEach(t=>M.addEventListener(t,e=>{ce(O,ae(e))}));class A{static centerX=0;static centerY=0;static ratio=1;static#e;static animationIsRunning(){return this.#e!==void 0}static#t=!1;static#n=l("zoomText",SVGGElement);static#r=R(this.#n.firstElementChild,SVGTextElement);static startAnimation(){this.animationIsRunning()||this.restartAnimation()}static restartAnimation(e=0){const n=performance.now()+e,r=z(n,0,n+1e4,Math.log(300)),i=z(n+1e3,0,n+1e4,.75),o=n+15e3;this.#e=a=>{if(a>o){const c=(Math.random()+Math.random())/2*5-2.5,u=2-c*c;this.selectNewTarget({x:c,y:u}),this.restartAnimation(500)}else{const c=Math.exp(r(a));this.setNewZoom(c);const u=i(a);j.style.opacity=u.toString()}},se(),this.setNewZoom(1),this.#t||(this.#t=!0,requestAnimationFrame(this.onAnimationFrame))}static stopAnimation(){this.#e=void 0,this.setNewZoom(1)}static onAnimationFrame(e){requestAnimationFrame(A.onAnimationFrame),A.#e?.(e)}static updateGUI(){K.setAttribute("transform",`scale(${this.ratio}) translate(${-this.centerX}, ${-this.centerY})`),Be.setAttribute("transform",`translate(${this.centerX}, ${this.centerY})`),Xe.setAttribute("transform",`scale(${1/this.ratio})`),ce(j,{x:this.centerX,y:this.centerY});const e=(.15/this.ratio).toString();K.setAttribute("stroke-width",e),this.#r.textContent=`${this.ratio<10?Math.round(this.ratio*10)/10:Math.round(this.ratio)}⨉`}static selectNewTarget({x:e,y:n}){this.centerX=e,this.centerY=n,this.ratio=1,this.updateGUI()}static setNewZoom(e){this.ratio=e,this.updateGUI()}}function We(t){M.style.cursor=t.buttons?"zoom-in":"ew-resize"}["mouseup","mousedown","mouseenter"].forEach(t=>{M.addEventListener(t,We)});["mouseenter","mousemove","mousedown"].forEach(t=>{M.addEventListener(t,e=>{e.buttons&&A.selectNewTarget(ae(e))})});M.addEventListener("mouseleave",()=>{A.startAnimation()});["mouseenter","mouseup","mousedown"].forEach(t=>{M.addEventListener(t,e=>{e.buttons==0?A.startAnimation():A.stopAnimation()})});A.selectNewTarget({x:0,y:2});A.startAnimation();class D{constructor(e,n){this.parent=e,this.type=n;let r;for(const i of e.children)if(i instanceof n){r=i;break}if(!r)throw new Error("wtf");r.remove(),this.#e=r}#e;create(){return R(this.#e.cloneNode(!0),this.type)}createParented(){return this.parent.appendChild(this.create())}}class _{constructor(e,n,r,i=6/e){this.numberOfSegments=e;const o=n===void 0?void 0:l(n,SVGGElement),a=l(r,SVGGElement);if(o){{const c=new D(o,SVGCircleElement);this.#e=G(e+1,()=>c.createParented())}{const c=new D(o,SVGLineElement);this.#t=G(e,()=>c.createParented())}}else this.#e=[],this.#t=[];{const c=new D(a,SVGCircleElement),u=new D(a,SVGLineElement);this.#n=G(e,()=>{const p=u.createParented(),g=c.createParented(),E=c.createParented();return{start:g,middle:p,end:E}})}this.resize(i)}#e;#t;#n;resize(e){const n=this.numberOfSegments+1,r=this.numberOfSegments/2,i=G(n,a=>{const c=(a-r)*e,u=c*c/2;return{x:c,y:u}});for(const[a,c]of H(i,this.#e))c.cx.baseVal.value=a.x,c.cy.baseVal.value=a.y;const o=G(i.length-1,a=>({first:i[a],second:i[a+1]}));for(const[{first:a,second:c},u]of H(o,this.#t))u.x1.baseVal.value=a.x,u.y1.baseVal.value=a.y,u.x2.baseVal.value=c.x,u.y2.baseVal.value=c.y;for(const[{first:a,second:c},{start:u,middle:p,end:g}]of H(o,this.#n)){const b=(c.y-a.y)/(c.x-a.x)/2;u.cx.baseVal.value=p.x1.baseVal.value=a.x,u.cy.baseVal.value=p.y1.baseVal.value=b,g.cx.baseVal.value=p.x2.baseVal.value=c.x,g.cy.baseVal.value=p.y2.baseVal.value=b}}}class V{constructor(e){this.toDo=e,this.callback=this.callback.bind(this),this.callback(performance.now())}#e=!1;cancel(){this.#e=!0}callback(e){this.#e||(requestAnimationFrame(this.callback),this.toDo(e))}}function W(t,e,n,r){n<t&&([t,e,n,r]=[n,r,t,e]);const i=S(t,0,n,Math.PI),o=S(1,e,-1,r);return function(a){return a<=t?e:a>=n?r:o(Math.cos(i(a)))}}new _(6,"sampleParabola","sampleDerivative",1);{const n=W(0,1,2e3,.5),r=new _(24,"animatedParabola1","animatedDerivative1");new V(i=>{const o=i%4897;r.resize(n(o))})}{const n=W(0,.5,2e3,.25),r=new _(24,"animatedParabola2","animatedDerivative2");new V(i=>{const o=i%5e3;r.resize(n(o))})}{const n=W(0,1,5e3,.125),r=new _(48,void 0,"animatedDerivative3");new V(i=>{const o=i%7e3;r.resize(n(o))})}class Ye{static#e=l("tangentLine",SVGGElement);static setPosition(e){const n=2-e*e,r=-2*e,i=Math.atan(r)/Math.PI*180;this.#e.setAttribute("transform",`translate(${e}, ${n}) rotate(${i})`)}static setRelativePosition(e){this.setPosition(e*2.25)}}new V(t=>Ye.setRelativePosition(Math.sin(t/2200)));{const t=l("anyNumber",HTMLSpanElement),e=Array.from("34,567.89");setInterval(()=>{let n=Math.random()*7|0;n==2?n=7:n==6&&(n=8);let r;n==0?r=(Math.random()*9|0)+1:r=Math.random()*10|0,e[n]=r.toString(),t.innerText=e.join("")},500)}Array.from(document.querySelectorAll("a:not([href])[id]")).forEach(t=>{const e=R(t,HTMLAnchorElement);e.innerText!=""&&(e.classList.add("self-link"),e.href="#"+e.id)});class T{element;static DEFAULT_LENGTH=10;static STROKE_WIDTH=1.6;#e;#t=!0;constructor(e=T.DEFAULT_LENGTH){this.element=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.#e=e,this.redraw(),this.element.setAttribute("stroke-width","0.25"),this.element.setAttribute("stroke-miterlimit","10")}redraw(){const e=this.#e,n=this.#t?0:e;if(!isFinite(e)){this.element.setAttribute("points","");return}const r=6,i=Math.sign(e)*Math.min(1,Math.abs(e)/r);this.element.setAttribute("points",`0,${0-n} 2.4,${i*6-n} 0.6,${i*4.4-n} 0.6,${e-n} -0.6,${e-n} -0.6,${i*4.4-n} -2.4,${i*6-n} 0,${0-n}`)}get length(){return this.#e}set length(e){this.#e=e,this.redraw()}get originAtHead(){return this.#t}set originAtHead(e){this.#t=e,this.redraw()}get originAtTail(){return!this.originAtHead}set originAtTail(e){this.originAtHead=!e}}{let t=function(v){const h=v/1e3,m=Math.sin(h),C=Math.cos(h),I=-Math.sin(h),B={functionX:h,position:m,velocity:C,acceleration:I};e.updateDisplay(B);{const f=m/2,w=f*70+50,y=Math.asin(f);l("pendulum",SVGGElement).setAttribute("transform",`rotate(${-y/Math.PI*180})`);const x=Math.cos(y)*70+10,P=l("offsetHorizontal",SVGLineElement);P.x1.baseVal.value=P.x2.baseVal.value=w,P.y1.baseVal.value=x,r.length=f*70,i.element.setAttribute("transform",`translate(${w},${x}) rotate(90)`),i.length=C*35,o.element.setAttribute("transform",`translate(${w},${x-10+T.STROKE_WIDTH/2}) rotate(90)`),o.length=I*35}a.forEach(({path:f,offset:w})=>{const y={left:-4,amplitude:-1,yCenter:0,right:4,x0:-h-w,frequencyMultiplier:1},$=X(y);f.setAttribute("d",$)});{const f=b(-m),w=le(-m),y=ue(-m);let $=`M 50,${k}`;for(let Z=0;Z<N;Z++)$+=` a ${y},${f},180,0,0,0,${2*f}`,$+=` a ${y},${w},180,0,0,0,${-2*w}`;$+=` a ${y},${f},180,0,0,${-y},${f} h ${y} v ${F}`,c.setAttribute("d",$);const x=k+N*2*(f-w)+f+F;u.cy.baseVal.value=x;const P=(q-U)/2,me={left:-3.25*P,amplitude:-1*P,yCenter:(q+U)/2,right:3.25*P,x0:-h*P,frequencyMultiplier:1/P};p.setAttribute("d",X(me))}};class e{constructor(){throw new Error("wtf")}static#e=Array.from(l("electron",SVGGElement).querySelectorAll("circle"));static#t=l("electricCurrentArrow",SVGPolygonElement);static#n=this.#t.getAttribute("transform");static#r=S(-1,85,1,215);static updateDisplay({functionX:h,velocity:m}){this.#e.forEach((C,I)=>{const B=this.#r(Math.sin(h-.1*I));C.cx.baseVal.value=B}),this.#t.setAttribute("transform",`${this.#n} scale(${m} 1)`)}}const n=l("pendulumContainer",SVGSVGElement),r=new T;r.originAtTail=!0,n.appendChild(r.element),r.element.setAttribute("fill","red"),r.element.setAttribute("transform","translate(50,90) rotate(90)");const i=new T;i.originAtTail=!0,n.appendChild(i.element),i.element.setAttribute("fill","violet"),i.element.setAttribute("transform","translate(50,80) rotate(90)");const o=new T;o.originAtTail=!0,n.appendChild(o.element),o.element.setAttribute("fill","blue"),o.element.setAttribute("transform","translate(50,80) rotate(90)");{const v=n.querySelectorAll("text");if(v.length!=3)throw new Error("wtf");const[h,m,C]=v,I=(h.getBBox().width-C.getBBox().width)/2;m.setAttribute("transform",`translate(${50+I},98)`)}const a=[["red",0],["magenta",Math.PI/2],["blue",Math.PI]].map(([v,h])=>{const m=document.createElementNS("http://www.w3.org/2000/svg","path");return l("threeSineWaves",SVGGElement).appendChild(m),m.style.strokeWidth="0.056",m.style.fill="none",m.style.stroke=v,{path:m,offset:h}}),c=l("springPath",SVGPathElement),u=l("springWeight",SVGCircleElement),p=l("springSineWave",SVGPathElement),g=10,E=15,b=S(-1,g,1,E),L=7.5,Y=10,le=S(-1,L,1,Y),ue=S(-1,22,1,18),k=-17,N=7,F=21,U=k+N*2*(g-L)+g+F,q=k+N*2*(E-Y)+E+F;new V(v=>{t(v)})}class Ue{static f(e){return .5*e+.5*Math.sin(e)+.25*Math.sin(2.3*e+.7)+.05*Math.cos(5.11*e-.2)}static fPrime(e){return .5+.5*Math.cos(e)+2.3*.25*Math.cos(2.3*e+.7)+5.11*.05*-Math.sin(5.11*e-.2)}static#e=l("deadReckoningEstimate",SVGPolylineElement);static#t=l("deadReckoningPointers",SVGGElement);static WIDTH=8.2;static update(e){this.#t.innerHTML="";const n=Math.ceil(1/e),r=this.WIDTH*e;let i="",o=this.f(0);for(let a=0;a<=n;a++){const c=r*a;i+=` ${c}, ${o}`;const u=this.fPrime(c),p=r*u;if(a<n){const g=this.f(c),E=Math.atan(u)/Math.PI*180,b=new T;this.#t.appendChild(b.element),b.element.setAttribute("transform",`translate(${c} ${g}) scale(0.05) rotate(${E+180})`);const L=new T;this.#t.appendChild(L.element),L.element.setAttribute("transform",`translate(${c} ${o}) scale(0.05) rotate(${E})`),a%2&&(b.element.style.opacity=L.element.style.opacity="0.333")}o+=p}this.#e.setAttribute("points",i)}static startDemo(){const o=z(500,.4,20500,.025);new V(a=>{const c=a%22e3,u=o(c);this.update(u)})}}Ue.startDemo();
